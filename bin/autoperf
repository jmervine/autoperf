#!/usr/bin/env ruby
require 'optparse'
require File.join(File.dirname(__FILE__), '..', 'lib', 'autoperf')

trap("INT") {
  puts "Terminating tests."
  Process.exit
}

conf = ""
OptionParser.new do |opts|
  opts.banner = "Usage: autoperf.rb [-c config]"

  opts.on("-c", "--config [STRING]", String, "configuration file") do |c|
    conf = c
  end

  if conf.empty?
    puts opts
    exit 1
  end

end.parse!

autoperf = Autoperf.new(conf)
autoperf.run()
autoperf.display.print
